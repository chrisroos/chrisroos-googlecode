--- 
blog_post: true
guid: 0424857d-9f43-46e1-8492-9fb6cbc68016
title: Changing the repository of code being managed by Piston (an alternative to piston switch)
filter: haml
created_at: 2008-08-01 18:17:35.153245 +01:00
layout: blog
---
:textile
  I've been working on a little script that gives us visibility of the state of the "pistonised":http://piston.rubyforge.org/ components of "our":http://www.reevoo.com applications.  One of the things I noticed was that we'd used multiple domains to pistonise content from our own "repository":http://subversion.tigris.org/.  I wanted to standardise them all and thought I'd be able to use the "piston switch":http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-talk/235517 command to do just that.  Unfortunately, the piston switch command appears to work only when switching between URLs where the domain remains constant (switching between example.com/tag/1 and example.com/tag/2, for example).  I needed to change the domain part of the URL (svn.example.com to www.example.com) and in some cases the port (example.com:8080 to example.com).  I figured I could just change the "piston:root" "subversion property":http://svnbook.red-bean.com/en/1.1/ch07s02.html and used svn propedit to do just that.  Unfortunately, on committing the change I could no longer piston update, I was getting a 'command not found' error from the shell.  This was a bit odd so I dug into the code.  It turns out that there was an extra newline in the piston:root property that was screwing up the svn checkout (the bit after the newline was being treated as a new command by the shell, hence the error).  The solution was to use svn propset rather than svn propedit to set the piston:root property: for some reason svn propedit introduces this unwanted newline, where svn propset doesn't.
