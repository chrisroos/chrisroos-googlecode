---
summary:    A greasemonkey script that allows me to generate permalinks for various web pages and insert those permalinks into the page as links with rel=canonical.
blog_post:  true
title:      Generating and Inserting a Rel=Canonical Link Into Pages With Firefox and Greasemonkey
created_at: 2009-04-14 14:14:00.122422 +01:00
guid:       fca91c96-2df9-4112-b7b7-8902fed60a6d
layout:     blog
filter:     haml
---
:textile
  I've been "thinking about this for over a year":/blog/2007-12-14-web-pages-should-specify-their-canonical-url-permalink but have only recently got around to doing something about it.  I've also chosen to use "rel=canonical":http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html rather than rel=bookmark.
  
  The magic is all in "this":http://userscripts.org/scripts/show/46797 "greasemonkey":https://addons.mozilla.org/en-US/firefox/addon/748 script.  It uses little rule objects to generate the canonical urls for, at the moment, "ebay":http://ebay.co.uk, "google":http://google.co.uk and "theyworkforyou":http://theyworkforyou.com and insert those urls into the page as a link element with rel=canonical.  Combining my script with the "show canonical":http://www.facesaerch.com/widget/showcanonical.user.js greasemonkey script (found on the "tripwolf blog":http://www.tripwolf.com/en/blog/2009/03/17/offtopic-canonical-a-powerful-seo-concept/) allows me to easily visit and use the canonical url in emails and the like.
  
  You should just about be able to see the relatively short canonical url compared to the large url generated by my searching from the firefox search box.
  
  "!http://farm4.static.flickr.com/3627/3440988983_1fe7b0518a_o.jpg!":http://www.flickr.com/photos/chrisjroos/3440988983/
  
  I hope to expand the set of rules (if you wanted to create one right now I'd suggest looking at the source of the script, the rules are defined towards the end of the script, and the "rule tests":http://chrisroos.googlecode.com/svn/trunk/scratch/javascript-permalinks/test/rules/) and possible have some central repository of rules that the script could use.  If you know of some sites that you'd like to see canonical urls for, but don't want to create the rule, then let me know and I'll see if I can create it for you.